<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>AI Recipe Creator üç≤</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <style>
      /* üåà Page Background */
      body {
        font-family: "Poppins", sans-serif;
        background: linear-gradient(
          135deg,
          #a8e063,
          #56ab2f
        ); /* change this line for different theme */
        min-height: 100vh;
        margin: 0;
        display: flex;
        flex-direction: column;
      }

      /* üåø Navbar */
      .navbar {
        background: linear-gradient(90deg, #56ab2f, #a8e063);
      }

      .navbar-brand {
        color: #fff !important;
        font-weight: 700;
        font-size: 1.5rem;
      }

      /* üßæ Main Box */
      .container.main {
        background: #ffffffcc;
        backdrop-filter: blur(8px);
        max-width: 600px;
        margin-top: 70px;
        border-radius: 20px;
        padding: 35px 25px;
        box-shadow: 0 8px 18px rgba(0, 0, 0, 0.2);
      }

      h2 {
        color: #2e7d32;
        font-weight: 700;
      }

      p {
        color: #444;
      }

      textarea {
        resize: none;
      }

      .btn-custom {
        background: linear-gradient(90deg, #43a047, #2e7d32);
        color: white;
        border: none;
        font-weight: 600;
        transition: transform 0.2s, box-shadow 0.2s;
      }

      .btn-custom:hover {
        transform: scale(1.03);
        box-shadow: 0 4px 12px rgba(46, 125, 50, 0.4);
      }

      /* üç¥ Modal Styling */
      .modal-content {
        border-radius: 15px;
        overflow: hidden;
      }

      .modal-header {
        background: linear-gradient(90deg, #56ab2f, #a8e063);
        color: white;
      }

      .modal-body {
        max-height: 50vh;
        overflow-y: auto;
        padding: 20px;
        background-color: #fffdf8;
      }

      .modal-footer {
        background-color: #f1f8e9;
      }

      pre {
        white-space: pre-wrap;
        font-family: "Poppins", sans-serif;
        color: #333;
        line-height: 1.6;
      }
    </style>
  </head>

  <body>
    <nav class="navbar navbar-expand-lg shadow-sm">
      <div class="container">
        <a class="navbar-brand" href="#">ü•ó AI Recipe Creator</a>
      </div>
    </nav>

    <div class="container main text-center">
      <h2 class="mb-3">Create Your Recipe Instantly!</h2>
      <p>
        Enter the ingredients you have, and let AI cook up something amazing üç≥
      </p>

      <textarea
        id="ingredients"
        class="form-control border-success rounded-3 mb-3"
        rows="4"
        placeholder="e.g., paneer, tomato, onion, garlic"
      ></textarea>

      <button id="generate-btn" class="btn btn-custom w-100 fw-semibold">
        üç≤ Generate Recipe
      </button>

      <div id="loading" class="mt-3 text-muted" style="display: none">
        <div class="spinner-border text-success" role="status"></div>
        <span class="ms-2">Cooking up ideas...</span>
      </div>
    </div>

    <div
      class="modal fade"
      id="recipeModal"
      tabindex="-1"
      aria-labelledby="recipeModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title fw-bold" id="recipeModalLabel">
              Your AI Recipe
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <pre id="recipeContent"></pre>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-outline-success"
              data-bs-dismiss="modal"
            >
              Close
            </button>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      document
        .getElementById("generate-btn")
        .addEventListener("click", async () => {
          const ingredients = document
            .getElementById("ingredients")
            .value.trim();
          const loading = document.getElementById("loading");
          const recipeContent = document.getElementById("recipeContent");

          if (!ingredients) {
            alert("‚ö†Ô∏è Please enter some ingredients!");
            return;
          }

          loading.style.display = "block";
          recipeContent.innerHTML = "";

          try {
            const response = await fetch("/generate", {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({ ingredients }),
            });

            const data = await response.json();
            loading.style.display = "none";

            if (data.recipe) {
              recipeContent.innerHTML = data.recipe;

              const modal = new bootstrap.Modal(
                document.getElementById("recipeModal")
              );
              modal.show();
            } else {
              alert("Error: " + data.error);
            }
          } catch (err) {
            loading.style.display = "none";
            alert("Error connecting to server.");
          }
        });
    </script>
  </body>
</html>
