<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI Recipe Creator üç≤</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="static/styles.css" />

  <body>
    <nav class="navbar navbar-expand-lg shadow-sm bg-light">
      <div class="container">
        <a class="navbar-brand" href="#">
          <img src="https://img.icons8.com/color/48/000000/chef-hat.png" alt="chef hat" class="d-inline-block align-text-top me-2" style="width: 30px;">
          AI Recipe Creator
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link active" href="#">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">About</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container my-4">
      <div class="row justify-content-center">
        <div class="col-12 col-sm-10 col-md-8 col-lg-6 text-center">
          <div class="card shadow-sm border-0 p-4">
            <h2 class="display-6 mb-3">Create Your Recipe</h2>
            <p class="text-muted mb-4">
              Enter the ingredients you have, and let AI cook up something amazing üç≥
            </p>

            <div class="form-group mb-4">
              <textarea
                id="ingredients"
                class="form-control border-success rounded-3"
                rows="4"
                placeholder="e.g., paneer, tomato, onion, garlic"
              ></textarea>
            </div>

            <button id="generate-btn" class="btn btn-success btn-lg w-100 fw-semibold">
              üç≤ Generate Recipe
            </button>

      <div id="loading" class="mt-3 text-muted" style="display: none">
        <div class="spinner-border text-success" role="status"></div>
        <span class="ms-2">Cooking up ideas...</span>
      </div>
    </div>

    <div
      class="modal fade"
      id="recipeModal"
      tabindex="-1"
      aria-labelledby="recipeModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-sm modal-md modal-lg">
        <div class="modal-content">
          <div class="modal-header bg-light">
            <h5 class="modal-title fw-bold" id="recipeModalLabel">
              <img src="https://img.icons8.com/color/48/000000/cooking-book.png" alt="recipe book" class="me-2" style="width: 30px;">
              Your AI Recipe
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <div class="recipe-container">
              <pre id="recipeContent" class="recipe-text"></pre>
            </div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-outline-success"
              data-bs-dismiss="modal"
            >
              Close
            </button>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      document
        .getElementById("generate-btn")
        .addEventListener("click", async () => {
          const ingredients = document
            .getElementById("ingredients")
            .value.trim();
          const loading = document.getElementById("loading");
          const recipeContent = document.getElementById("recipeContent");

          if (!ingredients) {
            alert("‚ö†Ô∏è Please enter some ingredients!");
            return;
          }

          loading.style.display = "block";
          recipeContent.innerHTML = "";

          try {
            const response = await fetch("/generate", {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({ ingredients }),
            });

            const data = await response.json();
            loading.style.display = "none";

            if (data.recipe) {
              recipeContent.innerHTML = data.recipe;

              const modal = new bootstrap.Modal(
                document.getElementById("recipeModal")
              );
              modal.show();
            } else {
              alert("Error: " + data.error);
            }
          } catch (err) {
            loading.style.display = "none";
            alert("Error connecting to server.");
          }
        });
    </script>
  </body>
</html>
